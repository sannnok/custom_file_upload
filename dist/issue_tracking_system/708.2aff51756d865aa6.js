"use strict";(self.webpackChunkissue_tracking_system=self.webpackChunkissue_tracking_system||[]).push([[708],{7708:(tt,T,o)=>{o.r(T),o.d(T,{UploadModule:()=>F});var u=o(6895),d=o(9170),l=o(5359),I=o(2986),N=o(6505);const{selectAll:D}=N._.getSelectors(),b=(0,l.ZF)("files"),M=(0,l.P1)(b,D);var m=o(5776),t=o(4650),_=o(9818),O=o(7392),A=o(2802),U=o(5641),k=o(3593);const Q=function(i){return["/","upload",i,"update"]};function R(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-page-header"),t._UZ(2,"app-page-header-back",1),t.TgZ(3,"app-page-header-title"),t._uU(4),t.qZA(),t.TgZ(5,"button",2)(6,"mat-icon"),t._uU(7,"edit"),t.qZA()(),t.TgZ(8,"button",3),t.NdJ("click",function(){const r=t.CHM(e).ngIf,p=t.oxw();return t.KtG(p.delete(r.id))}),t.TgZ(9,"mat-icon"),t._uU(10,"delete"),t.qZA()()(),t._UZ(11,"pre",4),t.qZA()}if(2&i){const e=n.ngIf;t.xp6(2),t.Q6J("link","/upload/list"),t.xp6(2),t.Oqu(e.title),t.xp6(1),t.Q6J("routerLink",t.VKq(4,Q,e.id)),t.xp6(6),t.Q6J("innerHTML",e.content,t.oJD)}}class h{constructor(n,e){this.activatedRoute=n,this.store=e}ngOnInit(){var i;this.fileId=this.activatedRoute.snapshot.params.id,this.file$=this.store.pipe((0,l.Ys)((i=this.fileId,(0,l.P1)(b,n=>n.entities[i])))),this.file$.pipe((0,I.q)(1)).subscribe(n=>!n&&this.store.dispatch((0,m.uJ)({id:this.fileId})))}delete(n){this.store.dispatch((0,m.Lr)({id:n}))}static#t=this.\u0275fac=function(e){return new(e||h)(t.Y36(d.gz),t.Y36(l.yh))};static#e=this.\u0275cmp=t.Xpm({type:h,selectors:[["app-file-details"]],decls:2,vars:3,consts:[[4,"ngIf"],["ariaLabel","Back to Posts List",3,"link"],["mat-icon-button","","color","primary","aria-label","Edit File",1,"ml-auto",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Delete File",3,"click"],["test-id","page-content",1,"page-content",3,"innerHTML"]],template:function(e,s){1&e&&(t.YNc(0,R,12,6,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,s.file$))},dependencies:[u.O5,d.rH,_.eB,O.Hw,A.q,U.x,k.S,u.Ov],changeDetection:0})}var x=o(2903),L=o(3238);function J(i){return function q(i){return"number"==typeof i}(i)&&isFinite(i)}function w(i,n){return Math.round(i*Math.pow(10,n))/Math.pow(10,n)}class a{static#t=this.formats={bytes:{max:1024},kilobytes:{max:Math.pow(1024,2),prev:"bytes"},megabytes:{max:Math.pow(1024,3),prev:"kilobytes"},gigabytes:{max:Math.pow(1024,4),prev:"gigabytes"},terabytes:{max:Number.MAX_SAFE_INTEGER,prev:"terabytes"}};transform(n,e=0,s="bytes",c){if(!(J(n)&&J(e)&&function H(i){return i%1==0}(e)&&function z(i){return i>=0}(e)))return n;let r=n,p=s;for(;"bytes"!==p;)r*=1024,p=a.formats[p].prev;if(c){const C=w(a.calculateResult(a.formats[c],r),e);return a.formatResult(C,c)}for(const f in a.formats)if(a.formats.hasOwnProperty(f)){const C=a.formats[f];if(r<C.max){const W=w(a.calculateResult(C,r),e);return a.formatResult(W,f)}}}static formatResult(n,e){return`${n} ${e}`}static calculateResult(n,e){const s=n.prev?a.formats[n.prev]:void 0;return s?e/s.max:e}static#e=this.\u0275fac=function(e){return new(e||a)};static#n=this.\u0275pipe=t.Yjl({name:"bytes",type:a,pure:!0})}const P=function(i){return["/","upload",i]};function S(i,n){if(1&i&&(t.TgZ(0,"mat-list-item",9)(1,"mat-icon",10),t._uU(2,"event_note"),t.qZA(),t.TgZ(3,"div",11),t._uU(4),t.qZA(),t.TgZ(5,"p",12),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",13),t._uU(9),t.ALo(10,"bytes"),t.qZA()()),2&i){const e=n.$implicit;t.Q6J("routerLink",t.VKq(8,P,e.id)),t.xp6(4),t.Oqu(e.name),t.xp6(2),t.Oqu(t.lcZ(7,4,e.id)),t.xp6(3),t.Oqu(t.lcZ(10,6,e.size))}}const $=function(){return["/dashboard"]},E=function(){return["/","upload","create"]};function G(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div")(1,"app-page-header"),t._UZ(2,"app-page-header-back",1),t.TgZ(3,"app-page-header-title",2),t._uU(4,"File List"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.onRefresh())}),t.TgZ(6,"mat-icon"),t._uU(7,"refresh"),t.qZA()()(),t.TgZ(8,"div",4)(9,"button",5)(10,"mat-icon"),t._uU(11,"add"),t.qZA()()(),t.TgZ(12,"div",6)(13,"mat-list",7),t.YNc(14,S,11,10,"mat-list-item",8),t.qZA()()()}if(2&i){const e=n.ngIf;t.xp6(2),t.Q6J("link",t.DdM(4,$)),t.xp6(1),t.Q6J("addons",e.length),t.xp6(6),t.Q6J("routerLink",t.DdM(5,E)),t.xp6(5),t.Q6J("ngForOf",e)}}class g{constructor(n,e){this.store=n,this.cdr=e,n.dispatch((0,m.yl)()),this.files$=this.store.pipe((0,l.Ys)(M))}onRefresh(){this.store.dispatch((0,m.yl)()),this.files$=this.store.pipe((0,l.Ys)(M)),this.cdr.detectChanges()}static#t=this.\u0275fac=function(e){return new(e||g)(t.Y36(l.yh),t.Y36(t.sBO))};static#e=this.\u0275cmp=t.Xpm({type:g,selectors:[["app-file-list"]],decls:2,vars:3,consts:[[4,"ngIf"],["ariaLabel","Back to homepage",3,"link"],[3,"addons"],["mat-icon-button","","color","primary","aria-label","Reload",1,"ml-auto",3,"click"],[1,"floating-action"],["mat-fab","","color","primary","aria-label","Add new item",3,"routerLink"],[1,"page-content"],[1,"pt-0"],["test-id","list-item","mat-ripple","",3,"routerLink",4,"ngFor","ngForOf"],["test-id","list-item","mat-ripple","",3,"routerLink"],["mat-list-icon","","color","accent"],["mat-line",""],[1,"property-date"],["mat-line","",1,"property-size"]],template:function(e,s){1&e&&(t.YNc(0,G,15,6,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,s.files$))},dependencies:[u.sg,u.O5,d.rH,_.eB,O.Hw,x.Zj,x.oh,L.X2,x.ap,L.wG,A.q,U.x,k.S,u.Ov,u.uU,a],styles:[".page-content[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .property-size[_ngcontent-%COMP%]{color:gray}.page-content[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]   .property-date[_ngcontent-%COMP%]{font-size:smaller}"],changeDetection:0})}class v{static#t=this.\u0275fac=function(e){return new(e||v)};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-files"]],decls:1,vars:0,template:function(e,s){1&e&&t._UZ(0,"router-outlet")},dependencies:[d.lC],changeDetection:0})}const X=["preview"];function K(i,n){if(1&i&&(t.TgZ(0,"h2"),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.fileName)}}class y{constructor(n,e){this.cdr=n,this.store=e,this.previewValue="No files currently selected for upload",this.fileName=""}updateImageDisplay(n){n.text().then(e=>{this.previewValue=e,this.cdr.detectChanges()}),this.fileName=n.name,this.selectedFile=n}saveFile(){!this.selectedFile||this.selectedFile.text().then(n=>{const e={id:Date.now().toString(),name:this.selectedFile.name,size:this.selectedFile.size,lastModified:this.selectedFile.lastModified,type:this.selectedFile.type,content:n};this.store.dispatch((0,m.Px)({file:e}))})}static#t=this.\u0275fac=function(e){return new(e||y)(t.Y36(t.sBO),t.Y36(l.yh))};static#e=this.\u0275cmp=t.Xpm({type:y,selectors:[["app-upload"]],viewQuery:function(e,s){if(1&e&&t.Gf(X,5),2&e){let c;t.iGM(c=t.CRH())&&(s.preview=c.first)}},decls:14,vars:2,consts:[[1,"form"],["type","button","mat-raised-button","",3,"click"],["type","file","id","file","name","file","accept",".txt, plain/text","hidden","","type","file","id","file",3,"change"],["fileInput",""],[1,"preview"],["preview",""],[4,"ngIf"],[1,"submit"],["mat-button","",3,"click"]],template:function(e,s){if(1&e){const c=t.EpF();t.TgZ(0,"div",0)(1,"div")(2,"button",1),t.NdJ("click",function(){t.CHM(c);const p=t.MAs(5);return t.KtG(p.click())}),t._uU(3,"Choose File"),t.qZA(),t.TgZ(4,"input",2,3),t.NdJ("change",function(p){return s.updateImageDisplay(p.target.files[0])}),t.qZA()(),t.TgZ(6,"div",4,5),t.YNc(8,K,2,1,"h2",6),t.TgZ(9,"pre"),t._uU(10),t.qZA()(),t.TgZ(11,"div",7)(12,"button",8),t.NdJ("click",function(){return s.saveFile()}),t._uU(13,"Submit"),t.qZA()()()}2&e&&(t.xp6(8),t.Q6J("ngIf",s.fileName),t.xp6(2),t.Oqu(s.previewValue))},dependencies:[u.O5,_.eB],styles:[".form[_ngcontent-%COMP%]{padding:16px}.form[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]{padding-top:16px}.form[_ngcontent-%COMP%]   .preview[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{overflow:auto;background:lightgray;padding:16px}.form[_ngcontent-%COMP%]   .submit[_ngcontent-%COMP%]{float:right}"],changeDetection:0})}const V=[{path:"",component:v,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:g},{path:"create",component:y},{path:":id",component:h}]}];class Z{static#t=this.\u0275fac=function(e){return new(e||Z)};static#e=this.\u0275mod=t.oAB({type:Z});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(V),d.Bz]})}var j=o(4006),B=o(305);class F{static#t=this.\u0275fac=function(e){return new(e||F)};static#e=this.\u0275mod=t.oAB({type:F});static#n=this.\u0275inj=t.cJS({imports:[u.ez,Z,j.UX,B.m]})}}}]);